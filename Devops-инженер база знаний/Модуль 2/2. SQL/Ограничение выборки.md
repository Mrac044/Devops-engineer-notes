Чтобы ограничить выборку, используется **`LIMIT`**.
![[Pasted image 20260206234358.png]]

## Как ограничивать выборку таблицы

#SQL-команда Представим, что нам нужно извлечь 10 записей. Для этого выполним такой запрос:

```sql
SELECT
    id,
    username,
    email
FROM users LIMIT 10;
```

|id|username|email|
|---|---|---|
|1|Duncan3|[Trevion53@yahoo.com](mailto:Trevion53@yahoo.com)|
|2|Michaela11|[Baylee52@yahoo.com](mailto:Baylee52@yahoo.com)|
|3|Margarete_Hegmann6|[Casimer_Cronin@yahoo.com](mailto:Casimer_Cronin@yahoo.com)|
|4|Kayley.Turcotte98|[Angelita.Altenwerth96@hotmail.com](mailto:Angelita.Altenwerth96@hotmail.com)>|
|5|Curtis_Baumbach|[Hobart91@hotmail.com](mailto:Hobart91@hotmail.com)|
|6|Leola.Ward|[Kenya_Legros17@yahoo.com](mailto:Kenya_Legros17@yahoo.com)|
|7|Stan_Sauer4|[Kiera73@hotmail.com](mailto:Kiera73@hotmail.com)|
|8|Bernie.Crooks|[Baby_Wintheiser@hotmail.com](mailto:Baby_Wintheiser@hotmail.com)|
|9|Woodrow14|[Wyatt9@hotmail.com](mailto:Wyatt9@hotmail.com)|
|10|Berta.Trantow|[Dorian31@gmail.com](mailto:Dorian31@gmail.com)|

[View on DB Fiddle](https://www.db-fiddle.com/f/74gTj5A3gNahoeEcTv4yqh/0)

#SQL-команда Оператор `LIMIT` без сортировки практически никогда не используется. Поэтому нужно задать сортировку таким образом:

```sql
SELECT
    id,
    username,
    email
FROM users ORDER BY id LIMIT 10;
```

| id  | username           | email                                                                          |
| --- | ------------------ | ------------------------------------------------------------------------------ |
| 1   | Duncan3            | [Trevion53@yahoo.com](mailto:Trevion53@yahoo.com)                              |
| 2   | Michaela11         | [Baylee52@yahoo.com](mailto:Baylee52@yahoo.com)                                |
| 3   | Margarete_Hegmann6 | [Casimer_Cronin@yahoo.com](mailto:Casimer_Cronin@yahoo.com)                    |
| 4   | Kayley.Turcotte98  | [Angelita.Altenwerth96@hotmail.com](mailto:Angelita.Altenwerth96@hotmail.com)> |
| 5   | Curtis_Baumbach    | [Hobart91@hotmail.com](mailto:Hobart91@hotmail.com)                            |
| 6   | Leola.Ward         | [Kenya_Legros17@yahoo.com](mailto:Kenya_Legros17@yahoo.com)                    |
| 7   | Stan_Sauer4        | [Kiera73@hotmail.com](mailto:Kiera73@hotmail.com)                              |
| 8   | Bernie.Crooks      | [Baby_Wintheiser@hotmail.com](mailto:Baby_Wintheiser@hotmail.com)              |
| 9   | Woodrow14          | [Wyatt9@hotmail.com](mailto:Wyatt9@hotmail.com)                                |
| 10  | Berta.Trantow      | [Dorian31@gmail.com](mailto:Dorian31@gmail.com)                                |

[View on DB Fiddle](https://www.db-fiddle.com/f/74gTj5A3gNahoeEcTv4yqh/1)

## Как показать все данные по выборкам

Допустим, пользователь хочет посмотреть следующие 10 записей. Это реализуется через **пагинацию** — механизм, который позволяет перемещаться по страницам.

#SQL-команда Чтобы реализовать пагинацию, одного `LIMIT` недостаточно. Еще понадобится смещение `OFFSET`:

```sql
SELECT
    id,
    username,
    email
FROM users ORDER BY id LIMIT 10 OFFSET 10;
```

| id  | username        | email                           |
| --- | --------------- | ------------------------------- |
| 11  | Winston.Mann24  | Kendall_Aufderhar@gmail.com     |
| 12  | Abelardo58      | Cole.Paucek@yahoo.com           |
| 13  | Tina_Huels      | Tyree89@yahoo.com               |
| 14  | Frank_Murazik97 | Marlon69@yahoo.com              |
| 15  | Gia67           | Anika_OReilly58@gmail.com       |
| 16  | Davonte78       | Dewayne_Lueilwitz69@hotmail.com |
| 17  | Mercedes14      | Filomena.Hodkiewicz@yahoo.com   |
| 18  | Saul25          | Rashawn.Altenwerth@gmail.com    |
| 19  | Gregory9        | Dallin_Lebsack88@hotmail.com    |
| 20  | Kenyatta70      | Marvin_Hettinger24@yahoo.com    |
Этот запрос:

- Отсортирует все записи.
- Пропустит первые 10 записей за счет части `OFFSET 10`.
- Возьмет следующие 10 записей.
[View on DB Fiddle](https://www.db-fiddle.com/f/74gTj5A3gNahoeEcTv4yqh/2)

Если менять `OFFSET`, можно обойти все данные в таблице:

```sql
-- Выбрать записи с 21 по 30
SELECT
    id,
    username,
    email
FROM users ORDER BY id LIMIT 10 OFFSET 20;

-- Выбрать записи с 31 по 40
SELECT
    id,
    username,
    email
FROM users ORDER BY id LIMIT 10 OFFSET 30;
```

[View on DB Fiddle](https://www.db-fiddle.com/f/74gTj5A3gNahoeEcTv4yqh/3)
**ПРОСТЫМИ СЛОВАМИ**
offset = пропустить столько-то записей
limit = отобразить столько-то записей
offset + limit = пропустить столько-то записей, и отобразить столько-то следующих
**ИЛИ**
будут выведены первые `LIMIT` строк после `OFFSET` строки

## Дополнительные материалы

- [LIMIT](https://postgrespro.ru/docs/postgresql/15/sql-select#SQL-LIMIT)