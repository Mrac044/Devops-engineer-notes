Для работы с регулярными выражениями используется оператор **`SIMILAR TO`** вместо `LIKE`.

#SQL-команда нужно выбрать пользователей, чье имя начинается на 'A' или 'B'. Чтобы решить ее, нужно применить такой шаблон:

```sql
SELECT
    id,
    first_name,
    last_name,
    email,
    birthday
FROM users
WHERE first_name SIMILAR TO '[AB]%';
```

| id  | first_name | last_name   | email                                                                      | birthday                      |
| --- | ---------- | ----------- | -------------------------------------------------------------------------- | ----------------------------- |
| 8   | Abigale    | Turner      | [Baby_Wintheiser@hotmail.com](mailto:Baby_Wintheiser@hotmail.com)>         | 2021-12-06T00:00<br><br>.000Z |
| 11  | Alvera     | Bergnaum    | [Kendall_Aufderhar@gmail.com](mailto:Kendall_Aufderhar@gmail.com)>         | 2021-10-11T00:00<br><br>.000Z |
| 13  | Alfreda    | Hermann     | [Tyree89@yahoo.com](mailto:Tyree89@yahoo.com)                              | 2021-12-12T00:00<br><br>.000Z |
| 16  | Abe        | Funk        | [Dewayne_Lueilwitz69@hotmail.com](mailto:Dewayne_Lueilwitz69@hotmail.com)> | 2021-06-16T00:00<br><br>.000Z |
| 26  | Andy       | Huel        | [Vincenza_Mertz@gmail.com](mailto:Vincenza_Mertz@gmail.com)                | 2021-07-09T00:00<br><br>.000Z |
| 28  | August     | Konopelski  | [Karianne_Treutel@gmail.com](mailto:Karianne_Treutel@gmail.com)            | 2021-07-04T00:00<br><br>.000Z |
| 33  | Alfredo    | Sipes       | [Hiram.Schowalter24@hotmail.com](mailto:Hiram.Schowalter24@hotmail.com)>   | 2022-01-17T00:00<br><br>.000Z |
| 34  | Alejandrin | Nicolas     | [Elizabeth58@yahoo.com](mailto:Elizabeth58@yahoo.com)                      | 2021-09-15T00:00<br><br>.000Z |
| 37  | Alvena     | Rutherford  | [Lina59@hotmail.com](mailto:Lina59@hotmail.com)                            | 2022-01-22T00:00<br><br>.000Z |
| 54  | Brayan     | Senger      | [Brianne.OKon75@gmail.com](mailto:Brianne.OKon75@gmail.com)                | 2021-06-29T00:00<br><br>.000Z |
| 59  | Arne       | Hudson      | [Evie_Franey72@gmail.com](mailto:Evie_Franey72@gmail.com)                  | 2021-08-17T00:00<br><br>.000Z |
| 78  | Angelica   | Donnelly    | [Jaylin69@hotmail.com](mailto:Jaylin69@hotmail.com)                        | 2021-07-31T00:00<br><br>.000Z |
| 85  | Araceli    | Wisozk      | [Ronny.Braun70@hotmail.com](mailto:Ronny.Braun70@hotmail.com)              | 2021-09-14T00:00<br><br>.000Z |
| 86  | Anderson   | Nader       | [Darrion_Yost@hotmail.com](mailto:Darrion_Yost@hotmail.com)                | 2022-04-30T00:00<br><br>.000Z |
| 95  | Andres     | Heidenreich | [Myrna2@gmail.com](mailto:Myrna2@gmail.com)                                | 2021-07-11T00:00<br><br>.000Z |
| 97  | Bernhard   | Herman      | [Vesta.Flatley16@hotmail.com](mailto:Vesta.Flatley16@hotmail.com)>         | 2021-12-20T00:00<br><br>.000Z |

[View on DB Fiddle](https://www.db-fiddle.com/f/imgkHqPrpgdP4bMBzJ7BGG/0)
В квадратных скобках перечисляются допустимые символы, а далее следует знакомый нам символ `%`. Этот запрос вернет пользователей с именами Abigale, Andy, Brayan, и так далее.

#SQL-команда Напишем запрос, который вернет всех пользователей по условию: username заканчивается любой буквой. Он будет выглядеть так:

```sql
SELECT
    id,
    username,
    email,
    birthday
FROM users
WHERE username SIMILAR TO '%[a-z]';
```

|id|username|email|birthday|
|---|---|---|---|
|5|Curtis_Baumbach|[Hobart91@hotmail.com](mailto:Hobart91@hotmail.com)|2021-07-25T00:00<br><br>.000Z|
|6|Leola.Ward|[Kenya_Legros17@yahoo.com](mailto:Kenya_Legros17@yahoo.com)|2022-02-07T00:00<br><br>.000Z|
|8|Bernie.Crooks|[Baby_Wintheiser@hotmail.com](mailto:Baby_Wintheiser@hotmail.com)>|2021-12-06T00:00<br><br>.000Z|
|10|Berta.Trantow|[Dorian31@gmail.com](mailto:Dorian31@gmail.com)|2021-06-15T00:00<br><br>.000Z|
|13|Tina_Huels|[Tyree89@yahoo.com](mailto:Tyree89@yahoo.com)|2021-12-12T00:00<br><br>.000Z|
|21|Connie.Frami|[Audrey.Gibson@yahoo.com](mailto:Audrey.Gibson@yahoo.com)|2022-02-27T00:00<br><br>.000Z|
|23|Constantin.Heathcote|[Melany_Pfeffer87@hotmail.com](mailto:Melany_Pfeffer87@hotmail.com)>|2021-09-17T00:00<br><br>.000Z|
|26|Kevon_Howe|[Vincenza_Mertz@gmail.com](mailto:Vincenza_Mertz@gmail.com)|2021-07-09T00:00<br><br>.000Z|
|27|Ramona.Johnson|[Jasen_DAmore94@gmail.com](mailto:Jasen_DAmore94@gmail.com)|2021-10-09T00:00<br><br>.000Z|
|35|Prudence_Reichel|[Jaleel.Littel@gmail.com](mailto:Jaleel.Littel@gmail.com)|2022-02-26T00:00<br><br>.000Z|
|36|Name_Boyer|[Josie.Mante@yahoo.com](mailto:Josie.Mante@yahoo.com)|2021-09-28T00:00<br><br>.000Z|
|37|Jailyn.Waters|[Lina59@hotmail.com](mailto:Lina59@hotmail.com)|2022-01-22T00:00<br><br>.000Z|
|38|Darron.Mann|[Hailie.McLaughlin64@gmail.com](mailto:Hailie.McLaughlin64@gmail.com)>|2021-08-11T00:00<br><br>.000Z|
|39|Alfonzo_Lehner|[Crawford64@yahoo.com](mailto:Crawford64@yahoo.com)|2021-09-29T00:00<br><br>.000Z|
|43|Kristofer_Lubowitz|[Monserrat.Carter64@hotmail.com](mailto:Monserrat.Carter64@hotmail.com)>|2022-04-20T00:00<br><br>.000Z|
|46|Edd_Harris|[Celine.Hand70@yahoo.com](mailto:Celine.Hand70@yahoo.com)|2022-02-08T00:00<br><br>.000Z|
|47|Dominique_Lang|[Electa60@gmail.com](mailto:Electa60@gmail.com)|2021-09-15T00:00<br><br>.000Z|
|55|Berta.Mueller|[Joshua.Lesch24@yahoo.com](mailto:Joshua.Lesch24@yahoo.com)|2022-04-14T00:00<br><br>.000Z|
|59|Sylvan_Nader|[Evie_Franey72@gmail.com](mailto:Evie_Franey72@gmail.com)|2021-08-17T00:00<br><br>.000Z|
|62|Kennedy_Halvorson|[Vladimir.Thiel2@yahoo.com](mailto:Vladimir.Thiel2@yahoo.com)|2022-02-12T00:00<br><br>.000Z|
|65|Sean_Reilly|[Dion_Jenkins@gmail.com](mailto:Dion_Jenkins@gmail.com)|2021-10-29T00:00<br><br>.000Z|
|66|Trevion.Carter|[Jaunita_Gislason81@yahoo.com](mailto:Jaunita_Gislason81@yahoo.com)>|2022-05-09T00:00<br><br>.000Z|
|69|Delphine_Bailey|[Sibyl65@yahoo.com](mailto:Sibyl65@yahoo.com)|2021-07-16T00:00<br><br>.000Z|
|72|Filiberto.Wolf|[Fernando.Lakin@hotmail.com](mailto:Fernando.Lakin@hotmail.com)>|2022-03-27T00:00<br><br>.000Z|
|73|Carter_Skiles|[Zoey_Ziemann@hotmail.com](mailto:Zoey_Ziemann@hotmail.com)|2021-08-22T00:00<br><br>.000Z|
|74|Pasquale.Murphy|[Chance_Moen@gmail.com](mailto:Chance_Moen@gmail.com)|2022-04-01T00:00<br><br>.000Z|
|83|Declan_Borer|[Celestino81@hotmail.com](mailto:Celestino81@hotmail.com)|2021-06-25T00:00<br><br>.000Z|
|84|Verona_Powlowski|[Ashlynn.Lind1@yahoo.com](mailto:Ashlynn.Lind1@yahoo.com)|2021-09-30T00:00<br><br>.000Z|
|87|Elmira.Kautzer|[Tommie20@gmail.com](mailto:Tommie20@gmail.com)|2021-08-07T00:00<br><br>.000Z|
|91|Bobbie.Predovic|[Rupert33@hotmail.com](mailto:Rupert33@hotmail.com)|2022-03-25T00:00<br><br>.000Z|
|98|Lennie.McGlynn|[Salvador_Hessel83@yahoo.com](mailto:Salvador_Hessel83@yahoo.com)>|2022-02-06T00:00<br><br>.000Z|
|99|Eldon_Johns|[Maximillian28@yahoo.com](mailto:Maximillian28@yahoo.com)|2021-12-30T00:00<br><br>.000Z|

[View on DB Fiddle](https://www.db-fiddle.com/f/imgkHqPrpgdP4bMBzJ7BGG/9)

#SQL-команда Чтобы выбрать все цифры, используем шаблон `[0-9]`:

```sql
SELECT
    id,
    username,
    email,
    birthday
FROM users
WHERE username SIMILAR TO '%[0-9]';
```

|id|username|email|birthday|
|---|---|---|---|
|1|Duncan3|[Trevion53@yahoo.com](mailto:Trevion53@yahoo.com)|2022-05-25T00:00<br><br>.000Z|
|2|Michaela11|[Baylee52@yahoo.com](mailto:Baylee52@yahoo.com)|2022-01-13T00:00<br><br>.000Z|
|3|Margarete_Hegmann6|[Casimer_Cronin@yahoo.com](mailto:Casimer_Cronin@yahoo.com)|2022-04-21T00:00<br><br>.000Z|
|4|Kayley.Turcotte98|[Angelita.Altenwerth96@hotmail.com](mailto:Angelita.Altenwerth96@hotmail.com)>|2021-10-31T00:00<br><br>.000Z|
|7|Stan_Sauer4|[Kiera73@hotmail.com](mailto:Kiera73@hotmail.com)|2022-04-13T00:00<br><br>.000Z|
|9|Woodrow14|[Wyatt9@hotmail.com](mailto:Wyatt9@hotmail.com)|2022-03-05T00:00<br><br>.000Z|

[View on DB Fiddle](https://www.db-fiddle.com/f/imgkHqPrpgdP4bMBzJ7BGG/11)

#SQL-команда Корректная почта должна содержать адрес, который состоит из:

- Имени с любым количеством любых символов — например, `my_email`
- Символа `@`
- Домена с любым количеством любых символов — например, `gmail`
- Точки
- Указания национальной зоны — например, `com`

Запрос на поиск корректных адресов будет таким:

```sql
SELECT
    username,
    email
FROM users WHERE email SIMILAR TO '%@%.%';
```

#SQL-команда В этом случае частица `NOT` позволит найти строки, которые **не** соответствуют шаблону:

```sql
SELECT
    username,
    email
FROM users WHERE email NOT SIMILAR TO '%@%.%';
```

[View on DB Fiddle](https://www.db-fiddle.com/f/imgkHqPrpgdP4bMBzJ7BGG/5)

#SQL-команда Символ подчеркивания обозначает ровно один любой символ, необязательно букву. Наш запрос будет выглядеть так:

```sql
SELECT
    username,
    email
FROM users WHERE email SIMILAR TO '%@%.__';
```

[View on DB Fiddle](https://www.db-fiddle.com/f/imgkHqPrpgdP4bMBzJ7BGG/6)

Полный перечень возможностей вы можете посмотреть в [документации](https://www.postgresql.org/docs/current/functions-matching.html).

## Выводы

Повторим самые полезные и часто используемые спецсимволы:

- Символ `%` соответствует любому количеству любых символов
- Квадратные скобки `[]` используются для перечисления конкретных символов — например, `[АЕИОУЭЮ]`
- Дефис `-` в квадратных скобках означает перечисление символов — например, `[0-9]` соответствует любой цифре
- Подчеркивание `_` означает ровно один любой символ (букву или цифру)

## Дополнительные материалы

- [Что такое тильда в PostgreSQL](https://ru.hexlet.io/qna/sql/questions/chto-takoe-tilda-v-postgresql)